<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Appointment Confirmation Email -->
        <record id="mail_template_appointment_confirmation" model="mail.template">
            <field name="name">Appointment: Confirmation</field>
            <field name="model_id" ref="model_external_appointment"/>
            <field name="subject">Appointment Confirmed: ${object.service_id.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.customer_email or object.partner_id.email}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Dear ${object.partner_id.name},
        <br/><br/>
        Your appointment has been confirmed!
        <br/><br/>
        <strong>Appointment Details:</strong><br/>
        Reference: ${object.name}<br/>
        Service: ${object.service_id.name}<br/>
        Date &amp; Time: ${format_datetime(object.start_datetime, dt_format='EEEE, MMMM d, y \'at\' h:mm a')}<br/>
        Duration: ${object.duration_minutes} minutes<br/>
        <br/>
        % if object.notes:
        Notes: ${object.notes}<br/>
        % endif
        <br/>
        % if object.service_id.allow_cancellation:
        If you need to cancel or reschedule, please contact us at least ${object.service_id.cancellation_hours} hours before your appointment.
        <br/>
        % endif
        <br/>
        We look forward to seeing you!
        <br/><br/>
        Best regards,<br/>
        ${object.company_id.name}
    </p>
</div>
            </field>
        </record>

        <!-- Appointment Cancellation Email -->
        <record id="mail_template_appointment_cancellation" model="mail.template">
            <field name="name">Appointment: Cancellation</field>
            <field name="model_id" ref="model_external_appointment"/>
            <field name="subject">Appointment Cancelled: ${object.service_id.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.customer_email or object.partner_id.email}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Dear ${object.partner_id.name},
        <br/><br/>
        This email confirms that your appointment has been cancelled.
        <br/><br/>
        <strong>Cancelled Appointment:</strong><br/>
        Reference: ${object.name}<br/>
        Service: ${object.service_id.name}<br/>
        Original Date &amp; Time: ${format_datetime(object.start_datetime, dt_format='EEEE, MMMM d, y \'at\' h:mm a')}<br/>
        <br/>
        If you would like to book a new appointment, please visit our booking page.
        <br/><br/>
        Best regards,<br/>
        ${object.company_id.name}
    </p>
</div>
            </field>
        </record>

        <!-- Appointment Reminder Email -->
        <record id="mail_template_appointment_reminder" model="mail.template">
            <field name="name">Appointment: Reminder</field>
            <field name="model_id" ref="model_external_appointment"/>
            <field name="subject">Reminder: Upcoming Appointment Tomorrow</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.customer_email or object.partner_id.email}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        Dear ${object.partner_id.name},
        <br/><br/>
        This is a friendly reminder about your upcoming appointment.
        <br/><br/>
        <strong>Appointment Details:</strong><br/>
        Reference: ${object.name}<br/>
        Service: ${object.service_id.name}<br/>
        Date &amp; Time: ${format_datetime(object.start_datetime, dt_format='EEEE, MMMM d, y \'at\' h:mm a')}<br/>
        Duration: ${object.duration_minutes} minutes<br/>
        <br/>
        % if object.notes:
        Notes: ${object.notes}<br/>
        % endif
        <br/>
        % if object.service_id.allow_cancellation:
        If you need to cancel or reschedule, please contact us as soon as possible.
        <br/>
        % endif
        <br/>
        We look forward to seeing you!
        <br/><br/>
        Best regards,<br/>
        ${object.company_id.name}
    </p>
</div>
            </field>
        </record>

    </data>
</odoo>
