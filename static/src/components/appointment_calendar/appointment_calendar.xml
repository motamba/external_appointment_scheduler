<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="external_appointment_scheduler.AppointmentCalendar">
        <div class="ea-calendar-widget">
            <t t-if="state.bookingComplete">
                <div class="alert alert-success">
                    <h4>Booking Confirmed!</h4>
                    <p>Your appointment has been successfully booked.</p>
                    <p><strong>Reference:</strong> <t t-esc="state.bookingReference"/></p>
                </div>
            </t>
            
            <t t-elif="state.loading">
                <div class="text-center p-5">
                    <i class="fa fa-spinner fa-spin fa-3x text-primary"/>
                    <p class="mt-3">Loading availability...</p>
                </div>
            </t>
            
            <t t-elif="state.error">
                <div class="alert alert-danger">
                    <p><t t-esc="state.error"/></p>
                    <button class="btn btn-primary" t-on-click="onRefresh">Retry</button>
                </div>
            </t>
            
            <t t-else="">
                <t t-if="!state.selectedSlot">
                    <SlotPicker 
                        slots="state.slots"
                        onSlotSelected.bind="onSlotSelected"
                    />
                </t>
                
                <t t-else="">
                    <BookingForm 
                        slot="state.selectedSlot"
                        onSubmit.bind="onBookingSubmitted"
                        onCancel.bind="onBackToSlots"
                    />
                </t>
            </t>
        </div>
    </t>

</templates>
